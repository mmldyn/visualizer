<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar</title>
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/x-icon" href="assets/v.png">
    
    <!-- Memuat script footer di <head> -->
    <script src="footer/loader.js"></script> 

    <style>
        body {
            font-family: 'Cocon Regular', sans-serif;
            background-color: #f8f7ff; 
        }
        @font-face {
            font-family: 'Cocon Regular';
            font-style: normal;
            font-weight: normal;
            src: local('Cocon Regular'), url('font/CoconRegularFont.woff') format('woff');
        }
        /* Custom colors */
        .main-purple { color: #6F4AB0; }
        .bg-main-purple { background-color: #6F4AB0; }
        .text-dark-purple { color: #3b1f7a; }
        .bg-light-purple { background-color: #EAE6F9; }

        /* Gaya Kalender */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, minmax(0, 1fr));
            gap: 0.25rem; /* gap-1 */
        }
        .calendar-day {
            padding: 0.75rem 0.25rem; /* py-3 px-1 */
            text-align: center;
            font-size: 0.875rem; /* text-sm */
            cursor: pointer;
            border-radius: 9999px; /* rounded-full */
            transition: all 0.2s ease-in-out;
            position: relative;
        }
        .calendar-day-header {
            font-weight: 600; /* font-semibold */
            font-size: 0.75rem; /* text-xs */
            color: #6b7280; /* text-gray-500 */
            text-align: center;
            padding-bottom: 0.5rem; /* pb-2 */
        }
        
        /* [PERUBAHAN] Hari ini (today) - diubah ke background merah */
        .calendar-day.today {
            background-color: #ef4444; /* Tailwind red-500 */
            color: white;
            /* font-weight: 700; Dihapus sesuai permintaan */
        }
        /* Hari yang dipilih (selected) */
        .calendar-day.selected {
            background-color: #6F4AB0; /* bg-main-purple */
            color: white;
            font-weight: 700;
            transform: scale(1.05);
        }
        .calendar-day.selected::after {
            content: '';
            position: absolute;
            bottom: 4px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background-color: white; 
        }
        /* Hari di bulan lain (abu-abu) */
        .calendar-day.other-month {
            color: #d1d5db; /* text-gray-300 */
            cursor: not-allowed;
        }
        .calendar-day:not(.other-month):not(.selected):not(.today):hover {
            background-color: #dcd7f0; /* Warna hover ungu muda */
        }
        /* [PERUBAHAN] Hover khusus untuk hari ini (merah lebih gelap) */
        .calendar-day.today:not(.selected):hover {
             background-color: #dc2626; /* Tailwind red-600 */
        }

        /* [BARU] Animasi transisi bulan */
        .calendar-fade {
            transition: opacity 0.3s ease-in-out;
        }
        .calendar-fade.fade-out {
            opacity: 0;
        }
        .calendar-fade.fade-in {
            opacity: 1;
        }

    </style>
</head>
<body class="text-dark-purple">

    <div class="container mx-auto max-w-lg pb-28">
        <!-- Header -->
        <header class="flex justify-between items-center p-6">
            <a href="dashboard.html" class="p-2 -ml-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 main-purple" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                </svg>
            </a>
            <h1 class="font-bold text-lg main-purple">Mark The Date</h1>
            <div class="w-6"></div> <!-- Placeholder untuk menyeimbangkan header -->
        </header>

        <!-- Konten Kalender -->
        <main class="px-6 space-y-6">
            <div class="bg-white p-4 rounded-2xl shadow-lg">
                <!-- Navigasi Bulan -->
                <div class="flex justify-between items-center mb-4">
                    <button id="prev-month" class="p-2 rounded-full hover:bg-light-purple">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                        </svg>
                    </button>
                    <h2 id="month-year" class="text-lg font-bold">Oktober 2025</h2>
                    <button id="next-month" class="p-2 rounded-full hover:bg-light-purple">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>
                
                <!-- Grid Kalender -->
                <div>
                    <!-- Header Hari (Minggu, Senin, ...) -->
                    <div class="calendar-grid mb-2">
                        <div class="calendar-day-header">Min</div>
                        <div class="calendar-day-header">Sen</div>
                        <div class="calendar-day-header">Sel</div>
                        <div class="calendar-day-header">Rab</div>
                        <div class="calendar-day-header">Kam</div>
                        <div class="calendar-day-header">Jum</div>
                        <div class="calendar-day-header">Sab</div>
                    </div>
                    <!-- Tanggal -->
                    <!-- [PERUBAHAN] Tambahkan kelas animasi -->
                    <div id="calendar-grid" class="calendar-grid calendar-fade fade-in">
                        <!-- Tanggal akan di-generate oleh JavaScript -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Placeholder untuk footer -->
    <div id="footer-placeholder"></div>

    <script type="module">
        
        document.addEventListener('DOMContentLoaded', () => {
            // Panggil loader footer
            if (typeof loadFooter === 'function') {
                loadFooter('nav-home'); // Tandai 'home' sebagai aktif
            }

            // --- Logika Kalender ---
            const monthYearEl = document.getElementById('month-year');
            const calendarGridEl = document.getElementById('calendar-grid');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');

            let currentDate = new Date(); 
            let selectedDates = new Set(); 

            // [PERUBAHAN] Dapatkan string tanggal hari ini (YYYY-MM-DD)
            const today = new Date();
            const todayString = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;


            function renderCalendar() {
                // [PERUBAHAN] Jangan reset innerHTML di sini, biarkan animasi
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth(); 

                monthYearEl.textContent = new Intl.DateTimeFormat('id-ID', {
                    year: 'numeric',
                    month: 'long'
                }).format(currentDate);

                const firstDayOfMonth = new Date(year, month, 1).getDay(); 
                const daysInMonth = new Date(year, month + 1, 0).getDate();

                // Buat HTML baru dalam sebuah fragmen
                const fragment = document.createDocumentFragment();

                // 1. Tambahkan sel kosong
                for (let i = 0; i < firstDayOfMonth; i++) {
                    const emptyCell = document.createElement('div');
                    emptyCell.classList.add('calendar-day', 'other-month');
                    fragment.appendChild(emptyCell);
                }

                // 2. Tambahkan sel hari
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayEl = document.createElement('div');
                    dayEl.classList.add('calendar-day');
                    dayEl.textContent = day;

                    const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;

                    // [PERUBAHAN] Cek apakah hari ini
                    if (dateString === todayString) {
                        dayEl.classList.add('today');
                    }
                    
                    if (selectedDates.has(dateString)) {
                        dayEl.classList.add('selected');
                    }

                    dayEl.addEventListener('click', () => {
                        handleDateClick(dateString, dayEl);
                    });

                    fragment.appendChild(dayEl);
                }
                
                // [PERUBAHAN] Ganti konten *setelah* fragmen siap
                calendarGridEl.innerHTML = ''; // Hapus konten lama
                calendarGridEl.appendChild(fragment); // Tambahkan konten baru
            }
            
            function handleDateClick(dateString, element) {
                if (selectedDates.has(dateString)) {
                    selectedDates.delete(dateString);
                    element.classList.remove('selected');
                } else {
                    selectedDates.add(dateString);
                    element.classList.add('selected');
                }
                console.log("Tanggal yang ditandai:", Array.from(selectedDates));
            }

            // [PERUBAHAN] Event listener untuk tombol navigasi bulan dengan animasi
            prevMonthBtn.addEventListener('click', () => {
                calendarGridEl.classList.add('fade-out');
                calendarGridEl.classList.remove('fade-in');
                
                setTimeout(() => {
                    currentDate.setMonth(currentDate.getMonth() - 1);
                    renderCalendar(); // Render konten baru (masih invisible)
                    calendarGridEl.classList.remove('fade-out'); // Mulai fade-in
                    calendarGridEl.classList.add('fade-in');
                }, 300); // Sesuaikan dengan durasi transisi CSS (0.3s)
            });

            nextMonthBtn.addEventListener('click', () => {
                calendarGridEl.classList.add('fade-out');
                calendarGridEl.classList.remove('fade-in');

                setTimeout(() => {
                    currentDate.setMonth(currentDate.getMonth() + 1);
                    renderCalendar(); // Render konten baru
                    calendarGridEl.classList.remove('fade-out'); // Mulai fade-in
                    calendarGridEl.classList.add('fade-in');
                }, 300); // Sesuaikan dengan durasi transisi CSS (0.3s)
            });

            // Render kalender awal
            renderCalendar();
        });
    </script>
</body>
</html>

